<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Inscripciones TOA</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        h2 {
            color: #667eea;
            margin-top: 40px;
            margin-bottom: 20px;
            font-size: 2em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        
        h3 {
            color: #764ba2;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        
        h4 {
            color: #555;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            line-height: 1.5;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .code-block pre {
            margin: 0;
        }
        
        .keyword { color: #ff79c6; }
        .string { color: #f1fa8c; }
        .comment { color: #6272a4; font-style: italic; }
        .type { color: #8be9fd; }
        .function { color: #50fa7b; }
        .annotation { color: #ff6b6b; }
        
        .info-box {
            background: #e7f3ff;
            border-left: 5px solid #2196F3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .warning-box {
            background: #fff3e0;
            border-left: 5px solid #ff9800;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .success-box {
            background: #e8f5e9;
            border-left: 5px solid #4caf50;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .endpoint {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #667eea;
        }
        
        .endpoint-method {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 5px;
            font-weight: bold;
            margin-right: 10px;
            color: white;
        }
        
        .get { background: #61affe; }
        .post { background: #49cc90; }
        .put { background: #fca130; }
        .patch { background: #50e3c2; }
        .delete { background: #f93e3e; }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        table th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
        }
        
        table td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
        }
        
        table tr:hover {
            background: #f5f5f5;
        }
        
        ul, ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 10px;
        }
        
        .json-example {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: 'Courier New', Courier, monospace;
            overflow-x: auto;
        }
        
        .toc {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .toc h3 {
            margin-top: 0;
            color: #667eea;
        }
        
        .toc ul {
            list-style: none;
            margin-left: 0;
        }
        
        .toc li {
            margin-bottom: 8px;
        }
        
        .toc a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .toc a:hover {
            color: #764ba2;
            text-decoration: underline;
        }
        
        footer {
            background: #333;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö Sistema de Inscripciones TOA</h1>
        </header>
        
        <div class="content">
            <!-- Tabla de Contenidos -->
            <div class="toc">
                <h3>üìã Tabla de Contenidos</h3>
                <ul>
                    <li><a href="#inscripcion-id">1. InscripcionId - Clave Compuesta</a></li>
                    <li><a href="#inscripcion">2. Inscripcion - Entidad Principal</a></li>
                    <li><a href="#localdate">3. LocalDate - Manejo de Fechas</a></li>
                    <li><a href="#enum">4. Enum - Estados de Inscripci√≥n</a></li>
                    <li><a href="#valid">5. @Valid - Validaci√≥n Autom√°tica</a></li>
                    <li><a href="#hibernate-ddl">6. Ver DDL de Hibernate</a></li>
                    <li><a href="#controller">7. InscripcionController - API REST</a></li>
                    <li><a href="#endpoints">8. Endpoints Detallados</a></li>
                    <li><a href="#ejemplos">9. Ejemplos de Uso</a></li>
                </ul>
            </div>

            <!-- InscripcionId -->
            <h2 id="inscripcion-id">1. InscripcionId - Clave Compuesta</h2>
            
            <div class="code-block">
                <pre><span class="annotation">@Embeddable</span>
<span class="annotation">@Data</span>
<span class="annotation">@NoArgsConstructor</span>
<span class="annotation">@AllArgsConstructor</span>
<span class="keyword">public class</span> <span class="type">InscripcionId</span> <span class="keyword">implements</span> <span class="type">Serializable</span> {

    <span class="annotation">@Column</span>(name = <span class="string">"id_estudiante"</span>)
    <span class="keyword">private</span> <span class="type">Long</span> idEstudiante;

    <span class="annotation">@Column</span>(name = <span class="string">"id_curso"</span>)
    <span class="keyword">private</span> <span class="type">Long</span> idCurso;

    <span class="comment">// equals() y hashCode() override...</span>
}</pre>
            </div>

            <h3>üîç ¬øQu√© hace @Embeddable?</h3>
            <div class="info-box">
                <p><strong>@Embeddable</strong> indica que esta clase puede ser <strong>embebida (incrustada)</strong> dentro de otra entidad como parte de su estructura, pero no es una entidad independiente con su propia tabla.</p>
            </div>

            <h4>Caracter√≠sticas principales:</h4>
            <ul>
                <li><strong>No tiene su propia tabla:</strong> Los campos <code>idEstudiante</code> e <code>idCurso</code> se mapean directamente como columnas en la tabla de <code>Inscripcion</code></li>
                <li><strong>Se usa con @EmbeddedId:</strong> En la clase <code>Inscripcion</code> se declara como clave primaria embebida</li>
                <li><strong>Representa una clave primaria compuesta:</strong> La combinaci√≥n de <code>idEstudiante</code> + <code>idCurso</code> identifica √∫nicamente cada inscripci√≥n</li>
                <li><strong>Debe implementar Serializable:</strong> Requisito obligatorio de JPA para claves compuestas</li>
            </ul>

            <h3>‚öôÔ∏è ¬øPor qu√© debe implementar Serializable?</h3>
            <div class="warning-box">
                <h4>Requisitos de JPA:</h4>
                <ol>
                    <li><strong>Especificaci√≥n JPA:</strong> La especificaci√≥n de JPA requiere que todas las clases usadas como <code>@EmbeddedId</code> o <code>@IdClass</code> implementen <code>Serializable</code></li>
                    <li><strong>Almacenamiento en cach√©:</strong> JPA/Hibernate necesita poder serializar las claves para:
                        <ul>
                            <li>Guardarlas en el cach√© de segundo nivel</li>
                            <li>Mantener el estado de las entidades entre transacciones</li>
                            <li>Transferir objetos entre diferentes contextos de persistencia</li>
                        </ul>
                    </li>
                    <li><strong>Identificaci√≥n de entidades:</strong> La clave primaria se usa para identificar entidades en el contexto de persistencia y debe poder convertirse a bytes</li>
                    <li><strong>Prevenci√≥n de errores:</strong> Sin <code>Serializable</code>, obtendr√≠as <code>NotSerializableException</code> en tiempo de ejecuci√≥n</li>
                </ol>
            </div>

            <h3>üóÇÔ∏è Niveles de Cach√© en Hibernate</h3>

            <h4>üì¶ Cach√© de Primer Nivel (First-Level Cache)</h4>
            <div class="info-box">
                <p><strong>Caracter√≠sticas:</strong></p>
                <ul>
                    <li><strong>Autom√°tico y obligatorio</strong> - Siempre est√° activo</li>
                    <li><strong>Alcance:</strong> Dentro de una misma sesi√≥n/transacci√≥n (<code>EntityManager</code> o <code>Session</code>)</li>
                    <li><strong>Duraci√≥n:</strong> Solo mientras dura la transacci√≥n</li>
                    <li><strong>No configurable:</strong> No puedes desactivarlo</li>
                </ul>
            </div>

            <h4>üí° Ejemplo de Cach√© de Primer Nivel:</h4>
            <div class="code-block">
                <pre><span class="comment">// Primera consulta - va a la BD</span>
<span class="type">Estudiante</span> estudiante1 = entityManager.<span class="function">find</span>(<span class="type">Estudiante</span>.<span class="keyword">class</span>, <span class="string">1L</span>);

<span class="comment">// Segunda consulta del MISMO estudiante en la MISMA transacci√≥n</span>
<span class="comment">// NO va a la BD, lo toma del cach√© de primer nivel</span>
<span class="type">Estudiante</span> estudiante2 = entityManager.<span class="function">find</span>(<span class="type">Estudiante</span>.<span class="keyword">class</span>, <span class="string">1L</span>);

<span class="comment">// estudiante1 == estudiante2 (misma instancia en memoria)</span></pre>
            </div>

            <div class="success-box">
                <p><strong>‚úÖ Beneficios del Cach√© de Primer Nivel:</strong></p>
                <ul>
                    <li>Evita consultas duplicadas dentro de la misma transacci√≥n</li>
                    <li>Garantiza consistencia de objetos (siempre la misma instancia)</li>
                    <li>Reduce carga en la BD</li>
                </ul>
                <p><strong>‚ùå Limitaci√≥n:</strong></p>
                <ul>
                    <li>Solo funciona dentro de una transacci√≥n</li>
                    <li>Al cerrar la transacci√≥n, se pierde el cach√©</li>
                </ul>
            </div>

            <h4>üåê Cach√© de Segundo Nivel (Second-Level Cache)</h4>
            <div class="info-box">
                <p><strong>Caracter√≠sticas:</strong></p>
                <ul>
                    <li><strong>Opcional</strong> - Debes configurarlo expl√≠citamente</li>
                    <li><strong>Alcance:</strong> A nivel de aplicaci√≥n (compartido entre todas las sesiones)</li>
                    <li><strong>Duraci√≥n:</strong> Persiste entre transacciones y requests</li>
                    <li><strong>Configurable:</strong> Puedes elegir qu√© entidades cachear</li>
                </ul>
            </div>

            <h4>üí° Ejemplo de Cach√© de Segundo Nivel:</h4>
            <div class="code-block">
                <pre><span class="comment">// Usuario A en transacci√≥n 1</span>
<span class="type">Curso</span> curso1 = entityManager.<span class="function">find</span>(<span class="type">Curso</span>.<span class="keyword">class</span>, <span class="string">1L</span>); <span class="comment">// Va a la BD</span>

<span class="comment">// Usuario B en transacci√≥n 2 (diferente)</span>
<span class="type">Curso</span> curso2 = entityManager.<span class="function">find</span>(<span class="type">Curso</span>.<span class="keyword">class</span>, <span class="string">1L</span>); <span class="comment">// NO va a la BD</span>
<span class="comment">// Lo toma del cach√© de segundo nivel</span></pre>
            </div>

            <div class="success-box">
                <p><strong>‚úÖ Beneficios del Cach√© de Segundo Nivel:</strong></p>
                <ul>
                    <li>Mejora rendimiento para datos consultados frecuentemente</li>
                    <li>Reduce significativamente la carga en la BD</li>
                    <li>√ötil para datos que no cambian mucho (cat√°logos, configuraciones)</li>
                </ul>
            </div>

            <div class="warning-box">
                <p><strong>¬øCu√°ndo usar Cach√© de Segundo Nivel?</strong></p>
                <ul>
                    <li>‚úÖ Datos de solo lectura o que cambian poco</li>
                    <li>‚úÖ Datos consultados frecuentemente</li>
                    <li>‚úÖ Cat√°logos (pa√≠ses, categor√≠as, roles)</li>
                    <li>‚úÖ Configuraciones del sistema</li>
                </ul>
                <p><strong>¬øCu√°ndo NO usarlo?</strong></p>
                <ul>
                    <li>‚ùå Datos que cambian constantemente</li>
                    <li>‚ùå Datos cr√≠ticos que deben estar siempre actualizados</li>
                    <li>‚ùå Aplicaciones distribuidas sin cach√© distribuido</li>
                </ul>
            </div>

            <h4>‚öôÔ∏è Configuraci√≥n del Cach√© de Segundo Nivel:</h4>

            <p><strong>1. Agregar dependencia (Ehcache):</strong></p>
            <div class="code-block">
                <pre><span class="keyword">&lt;dependency&gt;</span>
    <span class="keyword">&lt;groupId&gt;</span>org.hibernate<span class="keyword">&lt;/groupId&gt;</span>
    <span class="keyword">&lt;artifactId&gt;</span>hibernate-ehcache<span class="keyword">&lt;/artifactId&gt;</span>
<span class="keyword">&lt;/dependency&gt;</span></pre>
            </div>

            <p><strong>2. Configurar en <code>application.properties</code>:</strong></p>
            <div class="code-block">
                <pre><span class="comment"># Habilitar cach√© de segundo nivel</span>
spring.jpa.properties.hibernate.cache.use_second_level_cache=<span class="keyword">true</span>

<span class="comment"># Proveedor de cach√©</span>
spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.EhCacheRegionFactory

<span class="comment"># Habilitar estad√≠sticas para monitorear</span>
spring.jpa.properties.hibernate.generate_statistics=<span class="keyword">true</span></pre>
            </div>

            <p><strong>3. Marcar entidades cacheables:</strong></p>
            <div class="code-block">
                <pre><span class="annotation">@Entity</span>
<span class="annotation">@Cacheable</span>  <span class="comment">‚Üê Habilita cach√© para esta entidad</span>
<span class="annotation">@org.hibernate.annotations.Cache</span>(usage = CacheConcurrencyStrategy.READ_ONLY)
<span class="keyword">public class</span> <span class="type">Curso</span> {
    <span class="comment">// ...</span>
}</pre>
            </div>

            <p><strong>Estrategias de concurrencia:</strong></p>
            <ul>
                <li><code>READ_ONLY</code>: Datos que nunca cambian</li>
                <li><code>READ_WRITE</code>: Datos que pueden modificarse</li>
                <li><code>NONSTRICT_READ_WRITE</code>: Menor consistencia, mayor rendimiento</li>
                <li><code>TRANSACTIONAL</code>: Transacciones distribuidas</li>
            </ul>

            <h4>üîç Comparaci√≥n de rendimiento:</h4>

            <p><strong>Sin cach√©:</strong></p>
            <div class="code-block">
                <pre><span class="comment">// Request 1 - Usuario A</span>
<span class="type">Curso</span> curso = cursoRepository.<span class="function">findById</span>(<span class="string">1L</span>); <span class="comment">// SELECT * FROM cursos WHERE id=1</span>

<span class="comment">// Request 2 - Usuario B (diferente sesi√≥n)</span>
<span class="type">Curso</span> curso = cursoRepository.<span class="function">findById</span>(<span class="string">1L</span>); <span class="comment">// SELECT * otra vez!</span>

<span class="comment">// Request 3 - Usuario C</span>
<span class="type">Curso</span> curso = cursoRepository.<span class="function">findById</span>(<span class="string">1L</span>); <span class="comment">// SELECT * otra vez!</span>

<span class="comment">// Resultado: 3 consultas a la BD</span></pre>
            </div>

            <p><strong>Con cach√© de segundo nivel:</strong></p>
            <div class="code-block">
                <pre><span class="comment">// Request 1 - Usuario A</span>
<span class="type">Curso</span> curso = cursoRepository.<span class="function">findById</span>(<span class="string">1L</span>); <span class="comment">// SELECT * FROM cursos WHERE id=1</span>

<span class="comment">// Request 2 - Usuario B</span>
<span class="type">Curso</span> curso = cursoRepository.<span class="function">findById</span>(<span class="string">1L</span>); <span class="comment">// Desde cach√© ‚úÖ</span>

<span class="comment">// Request 3 - Usuario C</span>
<span class="type">Curso</span> curso = cursoRepository.<span class="function">findById</span>(<span class="string">1L</span>); <span class="comment">// Desde cach√© ‚úÖ</span>

<span class="comment">// Resultado: 1 consulta a la BD</span></pre>
            </div>

            <h4>üìä Resumen de Niveles de Cach√©:</h4>
            <table>
                <tr>
                    <th>Cach√©</th>
                    <th>Alcance</th>
                    <th>Duraci√≥n</th>
                    <th>Autom√°tico</th>
                    <th>Uso Principal</th>
                </tr>
                <tr>
                    <td><strong>Primer Nivel</strong></td>
                    <td>Una transacci√≥n</td>
                    <td>Hasta cerrar transacci√≥n</td>
                    <td>‚úÖ S√≠</td>
                    <td>Evitar duplicados en misma transacci√≥n</td>
                </tr>
                <tr>
                    <td><strong>Segundo Nivel</strong></td>
                    <td>Toda la app</td>
                    <td>Entre transacciones</td>
                    <td>‚ùå No</td>
                    <td>Datos consultados frecuentemente</td>
                </tr>
                <tr>
                    <td><strong>Query Cache</strong></td>
                    <td>Toda la app</td>
                    <td>Entre transacciones</td>
                    <td>‚ùå No</td>
                    <td>Resultados de consultas complejas</td>
                </tr>
            </table>

            <div class="info-box">
                <p><strong>üîë ¬øPor qu√© necesita Serializable para cachear?</strong></p>
                <p>El cach√© de segundo nivel almacena objetos fuera de la memoria de la JVM (disco, Redis, etc.). Para esto:</p>
                <ol>
                    <li><strong>Serializa</strong> el objeto (lo convierte a bytes)</li>
                    <li>Lo guarda en el cach√©</li>
                    <li>Lo <strong>deserializa</strong> cuando lo necesita (lo reconstruye desde bytes)</li>
                </ol>
                <p>Sin <code>Serializable</code>, no puede convertir el objeto a bytes y lanzar√≠a <code>NotSerializableException</code>.</p>
            </div>

            <div class="success-box">
                <p><strong>üí° Mejor pr√°ctica:</strong> Usa cach√© de segundo nivel solo para datos que cambien poco y se consulten mucho, como cat√°logos o configuraciones del sistema.</p>
            </div>

            <!-- Inscripcion -->
            <h2 id="inscripcion">2. Inscripcion - Entidad Principal</h2>
            
            <div class="code-block">
                <pre><span class="annotation">@Entity</span>
<span class="annotation">@Table</span>(name = <span class="string">"inscripciones"</span>)
<span class="annotation">@Data</span>
<span class="annotation">@NoArgsConstructor</span>
<span class="annotation">@AllArgsConstructor</span>
<span class="keyword">public class</span> <span class="type">Inscripcion</span> {

    <span class="annotation">@EmbeddedId</span>
    <span class="keyword">private</span> <span class="type">InscripcionId</span> id;
    
    <span class="annotation">@ManyToOne</span>(fetch = FetchType.EAGER)
    <span class="annotation">@MapsId</span>(<span class="string">"idEstudiante"</span>)
    <span class="annotation">@JoinColumn</span>(name = <span class="string">"id_estudiante"</span>)
    <span class="keyword">private</span> <span class="type">Estudiante</span> estudiante;
    
    <span class="annotation">@ManyToOne</span>(fetch = FetchType.EAGER)
    <span class="annotation">@MapsId</span>(<span class="string">"idCurso"</span>)
    <span class="annotation">@JoinColumn</span>(name = <span class="string">"id_curso"</span>)
    <span class="keyword">private</span> <span class="type">Curso</span> curso;    
    
    <span class="annotation">@Column</span>(name = <span class="string">"fecha_inscripcion"</span>, nullable = <span class="keyword">false</span>)
    <span class="keyword">private</span> <span class="type">LocalDate</span> fechaInscripcion;

    <span class="annotation">@Enumerated</span>(EnumType.STRING)
    <span class="annotation">@Column</span>(nullable = <span class="keyword">false</span>)
    <span class="keyword">private</span> <span class="type">EstadoInscripcion</span> estado;

    <span class="keyword">public enum</span> <span class="type">EstadoInscripcion</span> {
        ACTIVA, COMPLETADA, ABANDONADA, EN_PROGRESO
    }
}</pre>
            </div>

            <h3>üìå Anotaciones Clave</h3>
            <table>
                <tr>
                    <th>Anotaci√≥n</th>
                    <th>Descripci√≥n</th>
                </tr>
                <tr>
                    <td><code>@Entity</code></td>
                    <td>Define que es una entidad JPA (tabla en la BD)</td>
                </tr>
                <tr>
                    <td><code>@Table</code></td>
                    <td>Mapea a la tabla <code>inscripciones</code></td>
                </tr>
                <tr>
                    <td><code>@EmbeddedId</code></td>
                    <td>Usa la clase embebida <code>InscripcionId</code> como clave primaria compuesta</td>
                </tr>
                <tr>
                    <td><code>@ManyToOne</code></td>
                    <td>Muchas inscripciones pertenecen a un estudiante/curso</td>
                </tr>
                <tr>
                    <td><code>@MapsId</code></td>
                    <td>Mapea este objeto al campo correspondiente de <code>InscripcionId</code></td>
                </tr>
                <tr>
                    <td><code>@JoinColumn</code></td>
                    <td>Define la columna de clave for√°nea</td>
                </tr>
                <tr>
                    <td><code>FetchType.EAGER</code></td>
                    <td>Carga el estudiante/curso inmediatamente con la inscripci√≥n</td>
                </tr>
                <tr>
                    <td><code>@Enumerated(EnumType.STRING)</code></td>
                    <td>Guarda el enum como texto en la BD (no como n√∫mero)</td>
                </tr>
            </table>

            <div class="success-box">
                <p><strong>üí° Concepto TOA:</strong> Esta clase representa la tabla de uni√≥n (TOA - Table Object Association) entre <code>Estudiante</code> y <code>Curso</code>, con atributos adicionales propios de la relaci√≥n (<code>fechaInscripcion</code> y <code>estado</code>).</p>
            </div>

            <!-- LocalDate -->
            <h2 id="localdate">3. LocalDate - Manejo de Fechas</h2>

            <h3>üóìÔ∏è Crear fechas</h3>
            <div class="code-block">
                <pre><span class="comment">// Fecha actual</span>
<span class="type">LocalDate</span> hoy = <span class="type">LocalDate</span>.<span class="function">now</span>();

<span class="comment">// Fecha espec√≠fica</span>
<span class="type">LocalDate</span> fecha = <span class="type">LocalDate</span>.<span class="function">of</span>(<span class="string">2025</span>, <span class="string">11</span>, <span class="string">19</span>);  <span class="comment">// a√±o, mes, d√≠a</span>
<span class="type">LocalDate</span> fecha2 = <span class="type">LocalDate</span>.<span class="function">of</span>(<span class="string">2025</span>, Month.NOVEMBER, <span class="string">19</span>);

<span class="comment">// Desde String</span>
<span class="type">LocalDate</span> fecha3 = <span class="type">LocalDate</span>.<span class="function">parse</span>(<span class="string">"2025-11-19"</span>);</pre>
            </div>

            <h3>‚ö° Operaciones con fechas</h3>
            <div class="code-block">
                <pre><span class="comment">// Sumar/restar d√≠as</span>
<span class="type">LocalDate</span> manana = hoy.<span class="function">plusDays</span>(<span class="string">1</span>);
<span class="type">LocalDate</span> ayer = hoy.<span class="function">minusDays</span>(<span class="string">1</span>);

<span class="comment">// Sumar/restar meses o a√±os</span>
<span class="type">LocalDate</span> proximoMes = hoy.<span class="function">plusMonths</span>(<span class="string">1</span>);
<span class="type">LocalDate</span> anoPasado = hoy.<span class="function">minusYears</span>(<span class="string">1</span>);

<span class="comment">// Comparar</span>
<span class="keyword">if</span> (fecha.<span class="function">isBefore</span>(hoy)) { }
<span class="keyword">if</span> (fecha.<span class="function">isAfter</span>(hoy)) { }
<span class="keyword">if</span> (fecha.<span class="function">equals</span>(hoy)) { }

<span class="comment">// Obtener componentes</span>
<span class="keyword">int</span> a√±o = hoy.<span class="function">getYear</span>();
<span class="keyword">int</span> mes = hoy.<span class="function">getMonthValue</span>();  <span class="comment">// 1-12</span>
<span class="keyword">int</span> dia = hoy.<span class="function">getDayOfMonth</span>();</pre>
            </div>

            <h3>üîÑ Uso en Controller</h3>
            <div class="code-block">
                <pre><span class="comment">// Crear inscripci√≥n con fecha actual</span>
<span class="type">Inscripcion</span> inscripcion = <span class="keyword">new</span> <span class="type">Inscripcion</span>();
inscripcion.<span class="function">setFechaInscripcion</span>(<span class="type">LocalDate</span>.<span class="function">now</span>());

<span class="comment">// Spring Boot convierte autom√°ticamente JSON a LocalDate</span>
<span class="annotation">@PostMapping</span>
<span class="keyword">public</span> <span class="type">Inscripcion</span> <span class="function">crear</span>(<span class="annotation">@RequestBody</span> <span class="type">Inscripcion</span> inscripcion) {
    <span class="comment">// inscripcion.getFechaInscripcion() ya viene como LocalDate</span>
    <span class="keyword">return</span> repository.<span class="function">save</span>(inscripcion);
}</pre>
            </div>

            <div class="info-box">
                <p><strong>üìå Conversi√≥n Autom√°tica:</strong> Spring Boot convierte autom√°ticamente entre <code>LocalDate</code> ‚Üî <code>"2025-11-19"</code> (formato ISO) en JSON.</p>
            </div>

            <!-- Enum -->
            <h2 id="enum">4. Enum - Estados de Inscripci√≥n</h2>

            <h3>üéØ Uso del Enum</h3>
            <div class="code-block">
                <pre><span class="comment">// Asignar valor</span>
<span class="type">Inscripcion</span> inscripcion = <span class="keyword">new</span> <span class="type">Inscripcion</span>();
inscripcion.<span class="function">setEstado</span>(<span class="type">EstadoInscripcion</span>.ACTIVA);

<span class="comment">// Comparar</span>
<span class="keyword">if</span> (inscripcion.<span class="function">getEstado</span>() == <span class="type">EstadoInscripcion</span>.COMPLETADA) {
    <span class="comment">// hacer algo</span>
}

<span class="comment">// Switch</span>
<span class="keyword">switch</span> (inscripcion.<span class="function">getEstado</span>()) {
    <span class="keyword">case</span> ACTIVA:
        System.out.<span class="function">println</span>(<span class="string">"Inscripci√≥n activa"</span>);
        <span class="keyword">break</span>;
    <span class="keyword">case</span> COMPLETADA:
        System.out.<span class="function">println</span>(<span class="string">"Curso completado"</span>);
        <span class="keyword">break</span>;
    <span class="keyword">case</span> ABANDONADA:
        System.out.<span class="function">println</span>(<span class="string">"Curso abandonado"</span>);
        <span class="keyword">break</span>;
    <span class="keyword">case</span> EN_PROGRESO:
        System.out.<span class="function">println</span>(<span class="string">"En progreso"</span>);
        <span class="keyword">break</span>;
}

<span class="comment">// Obtener todos los valores</span>
<span class="type">EstadoInscripcion</span>[] estados = <span class="type">EstadoInscripcion</span>.<span class="function">values</span>();

<span class="comment">// Desde String</span>
<span class="type">EstadoInscripcion</span> estado = <span class="type">EstadoInscripcion</span>.<span class="function">valueOf</span>(<span class="string">"ACTIVA"</span>);</pre>
            </div>

            <h3>üîß En el Controller</h3>
            <div class="code-block">
                <pre><span class="comment">// Cambiar estado de inscripci√≥n</span>
<span class="annotation">@PutMapping</span>(<span class="string">"/{idEstudiante}/{idCurso}/estado"</span>)
<span class="keyword">public</span> <span class="type">Inscripcion</span> <span class="function">cambiarEstado</span>(
    <span class="annotation">@PathVariable</span> <span class="type">Long</span> idEstudiante,
    <span class="annotation">@PathVariable</span> <span class="type">Long</span> idCurso,
    <span class="annotation">@RequestParam</span> <span class="type">EstadoInscripcion</span> nuevoEstado) {
    
    <span class="type">InscripcionId</span> id = <span class="keyword">new</span> <span class="type">InscripcionId</span>(idEstudiante, idCurso);
    <span class="type">Inscripcion</span> inscripcion = repository.<span class="function">findById</span>(id)
        .<span class="function">orElseThrow</span>(() -> <span class="keyword">new</span> <span class="type">RuntimeException</span>(<span class="string">"No encontrada"</span>));
    
    inscripcion.<span class="function">setEstado</span>(nuevoEstado);
    <span class="keyword">return</span> repository.<span class="function">save</span>(inscripcion);
}</pre>
            </div>

            <div class="info-box">
                <p><strong>üìå Conversi√≥n Autom√°tica:</strong> Spring Boot convierte autom√°ticamente entre <code>EstadoInscripcion</code> ‚Üî <code>"ACTIVA"</code> (nombre del enum como String) en JSON.</p>
            </div>

            <!-- @Valid -->
            <h2 id="valid">5. @Valid - Validaci√≥n Autom√°tica</h2>

            <p><code>@Valid</code> es una anotaci√≥n de <strong>Java Bean Validation</strong> que activa la validaci√≥n autom√°tica de los datos que llegan al controller.</p>

            <h3>üîç ¬øQu√© hace?</h3>
            <div class="info-box">
                <p>Cuando usas <code>@Valid</code> antes de <code>@RequestBody</code>, Spring Boot valida autom√°ticamente el objeto seg√∫n las anotaciones de validaci√≥n que tenga la clase.</p>
            </div>

            <h3>üìã Anotaciones de validaci√≥n comunes</h3>
            <div class="code-block">
                <pre><span class="keyword">public class</span> <span class="type">Inscripcion</span> {
    
    <span class="annotation">@NotNull</span>(message = <span class="string">"La fecha de inscripci√≥n es obligatoria"</span>)
    <span class="keyword">private</span> <span class="type">LocalDate</span> fechaInscripcion;
    
    <span class="annotation">@NotNull</span>(message = <span class="string">"El estado es obligatorio"</span>)
    <span class="keyword">private</span> <span class="type">EstadoInscripcion</span> estado;
}

<span class="keyword">public class</span> <span class="type">Estudiante</span> {
    
    <span class="annotation">@NotBlank</span>(message = <span class="string">"El nombre es obligatorio"</span>)
    <span class="annotation">@Size</span>(min = <span class="string">2</span>, max = <span class="string">100</span>, message = <span class="string">"El nombre debe tener entre 2 y 100 caracteres"</span>)
    <span class="keyword">private</span> <span class="type">String</span> nombre;
    
    <span class="annotation">@Email</span>(message = <span class="string">"Email inv√°lido"</span>)
    <span class="annotation">@NotBlank</span>(message = <span class="string">"El email es obligatorio"</span>)
    <span class="keyword">private</span> <span class="type">String</span> email;
    
    <span class="annotation">@Min</span>(value = <span class="string">18</span>, message = <span class="string">"Debe ser mayor de edad"</span>)
    <span class="keyword">private</span> <span class="type">Integer</span> edad;
}</pre>
            </div>

            <h3>‚öôÔ∏è C√≥mo funciona en el Controller</h3>
            <div class="code-block">
                <pre><span class="annotation">@PostMapping</span>
<span class="keyword">public</span> <span class="type">ResponseEntity</span>&lt;?&gt; <span class="function">createInscripcion</span>(
    <span class="annotation">@Valid</span> <span class="annotation">@RequestBody</span> <span class="type">Inscripcion</span> inscripcion) {  <span class="comment">‚Üê @Valid aqu√≠</span>
    
    <span class="comment">// Si la validaci√≥n falla, Spring autom√°ticamente:</span>
    <span class="comment">// - Retorna c√≥digo 400 (Bad Request)</span>
    <span class="comment">// - Incluye los mensajes de error en la respuesta</span>
    <span class="comment">// - NO ejecuta este c√≥digo</span>
    
    <span class="keyword">return</span> <span class="type">ResponseEntity</span>.<span class="function">ok</span>(inscripcionRepository.<span class="function">save</span>(inscripcion));
}</pre>
            </div>

            <h3>‚ùå Ejemplo de error cuando falla la validaci√≥n</h3>
            <p><strong>Request enviado:</strong></p>
            <div class="json-example">
{
  "fechaInscripcion": null,
  "estado": null
}
            </div>

            <p><strong>Response autom√°tico de Spring (400 Bad Request):</strong></p>
            <div class="json-example">
{
  "timestamp": "2025-11-19T10:30:00",
  "status": 400,
  "errors": [
    {
      "field": "fechaInscripcion",
      "message": "La fecha de inscripci√≥n es obligatoria"
    },
    {
      "field": "estado",
      "message": "El estado es obligatorio"
    }
  ]
}
            </div>

            <h3>üìö Principales anotaciones de validaci√≥n</h3>
            <table>
                <tr>
                    <th>Anotaci√≥n</th>
                    <th>Descripci√≥n</th>
                </tr>
                <tr>
                    <td><code>@NotNull</code></td>
                    <td>El campo no puede ser <code>null</code></td>
                </tr>
                <tr>
                    <td><code>@NotBlank</code></td>
                    <td>No puede ser <code>null</code>, vac√≠o o solo espacios (String)</td>
                </tr>
                <tr>
                    <td><code>@NotEmpty</code></td>
                    <td>No puede ser <code>null</code> o vac√≠o (String, Collection, Array)</td>
                </tr>
                <tr>
                    <td><code>@Size(min, max)</code></td>
                    <td>Longitud m√≠nima/m√°xima (String, Collection, Array)</td>
                </tr>
                <tr>
                    <td><code>@Min(value)</code></td>
                    <td>Valor m√≠nimo (n√∫meros)</td>
                </tr>
                <tr>
                    <td><code>@Max(value)</code></td>
                    <td>Valor m√°ximo (n√∫meros)</td>
                </tr>
                <tr>
                    <td><code>@Email</code></td>
                    <td>Valida formato de email</td>
                </tr>
                <tr>
                    <td><code>@Pattern(regexp)</code></td>
                    <td>Valida contra expresi√≥n regular</td>
                </tr>
                <tr>
                    <td><code>@Positive</code></td>
                    <td>N√∫mero positivo (> 0)</td>
                </tr>
                <tr>
                    <td><code>@PositiveOrZero</code></td>
                    <td>N√∫mero >= 0</td>
                </tr>
                <tr>
                    <td><code>@Past</code></td>
                    <td>Fecha en el pasado</td>
                </tr>
                <tr>
                    <td><code>@Future</code></td>
                    <td>Fecha en el futuro</td>
                </tr>
            </table>

            <h3>üîÑ Diferencia PUT vs PATCH con @Valid</h3>
            <div class="code-block">
                <pre><span class="comment">// PUT con @Valid - TODOS los campos son obligatorios</span>
<span class="annotation">@PutMapping</span>(<span class="string">"/{id}"</span>)
<span class="keyword">public</span> <span class="type">ResponseEntity</span>&lt;?&gt; <span class="function">update</span>(
    <span class="annotation">@PathVariable</span> <span class="type">Long</span> id,
    <span class="annotation">@Valid</span> <span class="annotation">@RequestBody</span> <span class="type">Estudiante</span> estudiante) {  <span class="comment">‚Üê Con @Valid</span>
    <span class="comment">// ...</span>
}

<span class="comment">// PATCH sin @Valid - Campos opcionales (actualizaci√≥n parcial)</span>
<span class="annotation">@PatchMapping</span>(<span class="string">"/{id}"</span>)
<span class="keyword">public</span> <span class="type">ResponseEntity</span>&lt;?&gt; <span class="function">partialUpdate</span>(
    <span class="annotation">@PathVariable</span> <span class="type">Long</span> id,
    <span class="annotation">@RequestBody</span> <span class="type">Estudiante</span> estudiante) {  <span class="comment">‚Üê Sin @Valid</span>
    
    <span class="comment">// Manualmente verificas qu√© campos vienen</span>
    <span class="keyword">if</span> (estudiante.<span class="function">getNombre</span>() != <span class="keyword">null</span>) {
        existingEstudiante.<span class="function">setNombre</span>(estudiante.<span class="function">getNombre</span>());
    }
    <span class="comment">// ...</span>
}</pre>
            </div>

            <div class="warning-box">
                <h4>‚ö†Ô∏è Importante:</h4>
                <ul>
                    <li><strong>PUT con @Valid:</strong> Todos los campos marcados con anotaciones de validaci√≥n deben cumplirse</li>
                    <li><strong>PATCH sin @Valid:</strong> Permite campos nulos, solo se actualizan los campos enviados</li>
                    <li><strong>Sin @Valid:</strong> No hay validaci√≥n autom√°tica, debes validar manualmente</li>
                </ul>
            </div>

            <h3>üõ†Ô∏è Capturar errores de validaci√≥n manualmente</h3>
            <div class="code-block">
                <pre><span class="annotation">@PostMapping</span>
<span class="keyword">public</span> <span class="type">ResponseEntity</span>&lt;?&gt; <span class="function">create</span>(
    <span class="annotation">@Valid</span> <span class="annotation">@RequestBody</span> <span class="type">Inscripcion</span> inscripcion,
    <span class="type">BindingResult</span> result) {  <span class="comment">‚Üê Captura los errores</span>
    
    <span class="keyword">if</span> (result.<span class="function">hasErrors</span>()) {
        <span class="type">Map</span>&lt;<span class="type">String</span>, <span class="type">String</span>&gt; errors = <span class="keyword">new</span> <span class="type">HashMap</span>&lt;&gt;();
        result.<span class="function">getFieldErrors</span>().<span class="function">forEach</span>(error -> 
            errors.<span class="function">put</span>(error.<span class="function">getField</span>(), error.<span class="function">getDefaultMessage</span>())
        );
        <span class="keyword">return</span> <span class="type">ResponseEntity</span>.<span class="function">badRequest</span>().<span class="function">body</span>(errors);
    }
    
    <span class="keyword">return</span> <span class="type">ResponseEntity</span>.<span class="function">ok</span>(repository.<span class="function">save</span>(inscripcion));
}</pre>
            </div>

            <div class="success-box">
                <p><strong>‚úÖ Resumen:</strong> <code>@Valid</code> automatiza la validaci√≥n de datos de entrada seg√∫n las reglas definidas en la clase del modelo, evitando c√≥digo repetitivo de validaci√≥n manual y mejorando la seguridad y calidad de los datos.</p>
            </div>

            <!-- Hibernate DDL -->
            <h2 id="hibernate-ddl">6. Ver DDL de Hibernate</h2>

            <p>Puedes ver el SQL que genera Hibernate al mapear tus entidades a tablas. Esto es √∫til para entender c√≥mo se traduce tu modelo JPA a la base de datos.</p>

            <h3>üñ•Ô∏è Opci√≥n 1: Ver SQL en la consola (Desarrollo)</h3>
            
            <p>Agrega estas propiedades en <code>application.properties</code>:</p>
            
            <div class="code-block">
                <pre><span class="comment"># Mostrar el SQL generado</span>
spring.jpa.show-sql=<span class="keyword">true</span>

<span class="comment"># Formatear el SQL para que sea legible</span>
spring.jpa.properties.hibernate.format_sql=<span class="keyword">true</span>

<span class="comment"># Mostrar los valores de los par√°metros</span>
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

<span class="comment"># Mostrar comentarios en el SQL</span>
spring.jpa.properties.hibernate.use_sql_comments=<span class="keyword">true</span></pre>
            </div>

            <h4>üìã Salida en la consola:</h4>
            <div class="code-block">
                <pre>Hibernate: 
    <span class="keyword">create table</span> cursos (
        id <span class="type">bigint</span> <span class="keyword">not null</span>,
        nombre <span class="type">varchar</span>(<span class="string">255</span>),
        creditos <span class="type">integer</span>,
        <span class="keyword">primary key</span> (id)
    )

Hibernate: 
    <span class="keyword">create table</span> estudiantes (
        id <span class="type">bigint</span> <span class="keyword">not null</span>,
        nombre <span class="type">varchar</span>(<span class="string">255</span>),
        email <span class="type">varchar</span>(<span class="string">255</span>),
        <span class="keyword">primary key</span> (id)
    )

Hibernate: 
    <span class="keyword">create table</span> inscripciones (
        id_curso <span class="type">bigint</span> <span class="keyword">not null</span>,
        id_estudiante <span class="type">bigint</span> <span class="keyword">not null</span>,
        fecha_inscripcion <span class="type">date</span> <span class="keyword">not null</span>,
        estado <span class="type">varchar</span>(<span class="string">255</span>) <span class="keyword">not null</span>,
        <span class="keyword">primary key</span> (id_curso, id_estudiante)
    )

Hibernate: 
    <span class="keyword">alter table</span> inscripciones 
        <span class="keyword">add constraint</span> FKxxx <span class="keyword">foreign key</span> (id_curso) 
        <span class="keyword">references</span> cursos

Hibernate: 
    <span class="keyword">alter table</span> inscripciones 
        <span class="keyword">add constraint</span> FKyyy <span class="keyword">foreign key</span> (id_estudiante) 
        <span class="keyword">references</span> estudiantes</pre>
            </div>

            <h3>üìÅ Opci√≥n 2: Exportar el DDL a un archivo</h3>
            
            <p>Agrega en <code>application.properties</code>:</p>
            
            <div class="code-block">
                <pre><span class="comment"># Genera el script DDL en un archivo</span>
spring.jpa.properties.javax.persistence.schema-generation.scripts.action=create
spring.jpa.properties.javax.persistence.schema-generation.scripts.create-target=create.sql
spring.jpa.properties.javax.persistence.schema-generation.scripts.create-source=metadata</pre>
            </div>

            <div class="info-box">
                <p><strong>üìå Resultado:</strong> Esto crear√° un archivo <code>create.sql</code> en la ra√≠z del proyecto con todo el DDL al iniciar la aplicaci√≥n.</p>
            </div>

            <h3>‚öôÔ∏è Opci√≥n 3: Configurar spring.jpa.hibernate.ddl-auto</h3>
            
            <div class="code-block">
                <pre><span class="comment"># Muestra el DDL completo en consola y crea las tablas</span>
spring.jpa.hibernate.ddl-auto=create

<span class="comment"># O para actualizar sin borrar datos:</span>
spring.jpa.hibernate.ddl-auto=update

<span class="comment"># O para validar sin modificar:</span>
spring.jpa.hibernate.ddl-auto=validate</pre>
            </div>

            <h4>üìã Valores de ddl-auto:</h4>
            <table>
                <tr>
                    <th>Valor</th>
                    <th>Descripci√≥n</th>
                </tr>
                <tr>
                    <td><code>create</code></td>
                    <td>Borra y crea las tablas cada vez <strong>‚ö†Ô∏è PIERDE DATOS</strong></td>
                </tr>
                <tr>
                    <td><code>create-drop</code></td>
                    <td>Crea al iniciar, borra al cerrar la aplicaci√≥n</td>
                </tr>
                <tr>
                    <td><code>update</code></td>
                    <td>Actualiza el esquema sin borrar datos existentes</td>
                </tr>
                <tr>
                    <td><code>validate</code></td>
                    <td>Solo valida que el esquema coincida con las entidades</td>
                </tr>
                <tr>
                    <td><code>none</code></td>
                    <td>No hace nada (recomendado para producci√≥n)</td>
                </tr>
            </table>

            <h3>üîß Configuraci√≥n completa recomendada para desarrollo</h3>
            
            <p>Archivo <code>application.properties</code> completo:</p>
            
            <div class="code-block">
                <pre><span class="comment"># Base de datos (ejemplo con H2 en memoria)</span>
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

<span class="comment"># JPA/Hibernate</span>
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create
spring.jpa.show-sql=<span class="keyword">true</span>
spring.jpa.properties.hibernate.format_sql=<span class="keyword">true</span>
spring.jpa.properties.hibernate.use_sql_comments=<span class="keyword">true</span>

<span class="comment"># Logging</span>
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE</pre>
            </div>

            <h3>üíæ DDL generado para el proyecto TOA</h3>
            
            <p>El SQL generado para la tabla <code>inscripciones</code> se ver√≠a as√≠:</p>
            
            <div class="code-block">
                <pre><span class="keyword">CREATE TABLE</span> inscripciones (
    id_estudiante <span class="type">BIGINT</span> <span class="keyword">NOT NULL</span>,
    id_curso <span class="type">BIGINT</span> <span class="keyword">NOT NULL</span>,
    fecha_inscripcion <span class="type">DATE</span> <span class="keyword">NOT NULL</span>,
    estado <span class="type">VARCHAR</span>(<span class="string">255</span>) <span class="keyword">NOT NULL</span>,
    <span class="keyword">PRIMARY KEY</span> (id_estudiante, id_curso),
    <span class="keyword">CONSTRAINT</span> fk_inscripcion_estudiante 
        <span class="keyword">FOREIGN KEY</span> (id_estudiante) <span class="keyword">REFERENCES</span> estudiantes(id),
    <span class="keyword">CONSTRAINT</span> fk_inscripcion_curso 
        <span class="keyword">FOREIGN KEY</span> (id_curso) <span class="keyword">REFERENCES</span> cursos(id)
);</pre>
            </div>

            <div class="info-box">
                <p><strong>üí° Nota importante:</strong> La <strong>clave primaria compuesta</strong> (<code>id_estudiante</code>, <code>id_curso</code>) se genera autom√°ticamente gracias a <code>@EmbeddedId</code> en la clase <code>InscripcionId</code>.</p>
            </div>

            <h3>‚ö†Ô∏è Importante en Producci√≥n</h3>
            
            <div class="warning-box">
                <h4>En producci√≥n, NUNCA uses:</h4>
                <ul>
                    <li><code>spring.jpa.hibernate.ddl-auto=create</code> (borra todos los datos)</li>
                    <li><code>spring.jpa.hibernate.ddl-auto=update</code> (puede causar inconsistencias)</li>
                </ul>
                
                <h4>En producci√≥n, usa:</h4>
                <div class="code-block" style="margin-top: 10px;">
                    <pre>spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=<span class="keyword">false</span></pre>
                </div>
                
                <p style="margin-top: 10px;">Y gestiona el esquema con herramientas de migraci√≥n como <strong>Flyway</strong> o <strong>Liquibase</strong>.</p>
            </div>

            <h3>üîç Ejemplo pr√°ctico</h3>
            
            <p>Si quieres ver el DDL generado para tu proyecto TOA:</p>
            
            <ol>
                <li>Abre <code>src/main/resources/application.properties</code></li>
                <li>Agrega las propiedades de configuraci√≥n de desarrollo</li>
                <li>Ejecuta la aplicaci√≥n</li>
                <li>Revisa la consola para ver el SQL generado</li>
            </ol>

            <div class="success-box">
                <p><strong>‚úÖ Beneficios:</strong> Ver el DDL generado te ayuda a entender c√≥mo Hibernate traduce tus anotaciones JPA a estructuras de base de datos reales, facilitando la depuraci√≥n y optimizaci√≥n del esquema.</p>
            </div>

            <!-- Controller -->
            <h2 id="controller">7. InscripcionController - API REST</h2>

            <h3>üì¶ Estructura del Controller</h3>
            <div class="code-block">
                <pre><span class="annotation">@RestController</span>
<span class="annotation">@RequestMapping</span>(<span class="string">"/api/inscripciones"</span>)
<span class="keyword">public class</span> <span class="type">InscripcionController</span> {

    <span class="annotation">@Autowired</span>
    <span class="keyword">private</span> <span class="type">InscripcionRepository</span> inscripcionRepository;

    <span class="annotation">@Autowired</span>
    <span class="keyword">private</span> <span class="type">EstudianteRepository</span> estudianteRepository;

    <span class="annotation">@Autowired</span>
    <span class="keyword">private</span> <span class="type">CursoRepository</span> cursoRepository;
    
    <span class="comment">// ... endpoints ...</span>
}</pre>
            </div>

            <h4>üîë Anotaciones Principales:</h4>
            <ul>
                <li><strong>@RestController:</strong> Combina <code>@Controller</code> + <code>@ResponseBody</code>. Las respuestas se serializan autom√°ticamente a JSON</li>
                <li><strong>@RequestMapping:</strong> Todas las rutas de este controller empiezan con <code>/api/inscripciones</code></li>
                <li><strong>@Autowired:</strong> Spring inyecta autom√°ticamente las instancias de los repositorios</li>
            </ul>

            <div class="warning-box">
                <p><strong>‚ö†Ô∏è Tres repositorios necesarios:</strong> Se necesitan los 3 repositorios porque al crear/actualizar inscripciones, hay que validar que existan el estudiante y el curso.</p>
            </div>

            <!-- Endpoints -->
            <h2 id="endpoints">8. Endpoints Detallados</h2>

            <h3>üì• GET - Obtener Inscripciones</h3>

            <div class="endpoint">
                <span class="endpoint-method get">GET</span>
                <code>/api/inscripciones</code>
                <p><strong>Descripci√≥n:</strong> Obtiene todas las inscripciones</p>
            </div>
            <div class="code-block">
                <pre><span class="annotation">@GetMapping</span>
<span class="keyword">public</span> <span class="type">ResponseEntity</span>&lt;<span class="type">List</span>&lt;<span class="type">Inscripcion</span>&gt;&gt; <span class="function">getAllInscripciones</span>() {
    <span class="type">List</span>&lt;<span class="type">Inscripcion</span>&gt; inscripciones = inscripcionRepository.<span class="function">findAll</span>();
    <span class="keyword">return</span> <span class="type">ResponseEntity</span>.<span class="function">ok</span>(inscripciones);
}</pre>
            </div>

            <div class="endpoint">
                <span class="endpoint-method get">GET</span>
                <code>/api/inscripciones/estudiante/{estudianteId}</code>
                <p><strong>Descripci√≥n:</strong> Obtiene todas las inscripciones de un estudiante</p>
            </div>
            <div class="code-block">
                <pre><span class="annotation">@GetMapping</span>(<span class="string">"/estudiante/{estudianteId}"</span>)
<span class="keyword">public</span> <span class="type">ResponseEntity</span>&lt;<span class="type">List</span>&lt;<span class="type">Inscripcion</span>&gt;&gt; <span class="function">getInscripcionesByEstudiante</span>(
        <span class="annotation">@PathVariable</span> <span class="type">Long</span> estudianteId) {
    <span class="type">List</span>&lt;<span class="type">Inscripcion</span>&gt; inscripciones = inscripcionRepository.<span class="function">findByEstudianteId</span>(estudianteId);
    <span class="keyword">return</span> <span class="type">ResponseEntity</span>.<span class="function">ok</span>(inscripciones);
}</pre>
            </div>

            <div class="endpoint">
                <span class="endpoint-method get">GET</span>
                <code>/api/inscripciones/curso/{cursoId}</code>
                <p><strong>Descripci√≥n:</strong> Obtiene todas las inscripciones de un curso</p>
            </div>

            <div class="endpoint">
                <span class="endpoint-method get">GET</span>
                <code>/api/inscripciones/{idEstudiante}/{idCurso}</code>
                <p><strong>Descripci√≥n:</strong> Obtiene una inscripci√≥n espec√≠fica por su clave compuesta</p>
            </div>
            <div class="code-block">
                <pre><span class="annotation">@GetMapping</span>(<span class="string">"/{idEstudiante}/{idCurso}"</span>)
<span class="keyword">public</span> <span class="type">ResponseEntity</span>&lt;<span class="type">Inscripcion</span>&gt; <span class="function">getInscripcionById</span>(
        <span class="annotation">@PathVariable</span> <span class="type">Long</span> idEstudiante,
        <span class="annotation">@PathVariable</span> <span class="type">Long</span> idCurso) {
    
    <span class="type">InscripcionId</span> id = <span class="keyword">new</span> <span class="type">InscripcionId</span>(idEstudiante, idCurso);
    <span class="keyword">return</span> inscripcionRepository.<span class="function">findById</span>(id)
            .<span class="function">map</span>(<span class="type">ResponseEntity</span>::ok)
            .<span class="function">orElse</span>(<span class="type">ResponseEntity</span>.<span class="function">notFound</span>().<span class="function">build</span>());
}</pre>
            </div>

            <div class="info-box">
                <p><strong>üí° Optional Pattern:</strong></p>
                <ul>
                    <li><code>.map(ResponseEntity::ok)</code> ‚Üí Si existe, retorna 200 con la inscripci√≥n</li>
                    <li><code>.orElse(ResponseEntity.notFound().build())</code> ‚Üí Si no existe, retorna 404</li>
                </ul>
            </div>

            <h3>üì§ POST - Crear Inscripci√≥n</h3>

            <div class="endpoint">
                <span class="endpoint-method post">POST</span>
                <code>/api/inscripciones</code>
                <p><strong>Descripci√≥n:</strong> Crea una nueva inscripci√≥n</p>
            </div>
            <div class="code-block">
                <pre><span class="annotation">@PostMapping</span>
<span class="keyword">public</span> <span class="type">ResponseEntity</span>&lt;?&gt; <span class="function">createInscripcion</span>(<span class="annotation">@Valid</span> <span class="annotation">@RequestBody</span> <span class="type">Inscripcion</span> inscripcion) {
    <span class="comment">// Validar que existan los IDs</span>
    <span class="keyword">if</span> (inscripcion.<span class="function">getId</span>() == <span class="keyword">null</span> || inscripcion.<span class="function">getId</span>().<span class="function">getIdEstudiante</span>() == <span class="keyword">null</span>) {
        <span class="keyword">return</span> <span class="type">ResponseEntity</span>.<span class="function">badRequest</span>().<span class="function">body</span>(<span class="string">"Debe especificar un estudiante"</span>);
    }
    <span class="keyword">if</span> (inscripcion.<span class="function">getId</span>().<span class="function">getIdCurso</span>() == <span class="keyword">null</span>) {
        <span class="keyword">return</span> <span class="type">ResponseEntity</span>.<span class="function">badRequest</span>().<span class="function">body</span>(<span class="string">"Debe especificar un curso"</span>);
    }
    
    <span class="comment">// Validar que existan en la BD</span>
    <span class="keyword">if</span> (!estudianteRepository.<span class="function">existsById</span>(inscripcion.<span class="function">getId</span>().<span class="function">getIdEstudiante</span>())) {
        <span class="keyword">return</span> <span class="type">ResponseEntity</span>.<span class="function">badRequest</span>().<span class="function">body</span>(<span class="string">"Estudiante no encontrado"</span>);
    }
    <span class="keyword">if</span> (!cursoRepository.<span class="function">existsById</span>(inscripcion.<span class="function">getId</span>().<span class="function">getIdCurso</span>())) {
        <span class="keyword">return</span> <span class="type">ResponseEntity</span>.<span class="function">badRequest</span>().<span class="function">body</span>(<span class="string">"Curso no encontrado"</span>);
    }

    <span class="comment">// Cargar las entidades completas</span>
    <span class="keyword">var</span> estudiante = estudianteRepository.<span class="function">findById</span>(inscripcion.<span class="function">getId</span>().<span class="function">getIdEstudiante</span>()).<span class="function">orElseThrow</span>();
    <span class="keyword">var</span> curso = cursoRepository.<span class="function">findById</span>(inscripcion.<span class="function">getId</span>().<span class="function">getIdCurso</span>()).<span class="function">orElseThrow</span>();
    
    inscripcion.<span class="function">setEstudiante</span>(estudiante);
    inscripcion.<span class="function">setCurso</span>(curso);

    <span class="type">Inscripcion</span> savedInscripcion = inscripcionRepository.<span class="function">save</span>(inscripcion);
    <span class="keyword">return</span> <span class="type">ResponseEntity</span>.<span class="function">status</span>(<span class="type">HttpStatus</span>.CREATED).<span class="function">body</span>(savedInscripcion);
}</pre>
            </div>

            <div class="warning-box">
                <p><strong>‚ö†Ô∏è Validaciones importantes:</strong></p>
                <ol>
                    <li>Verificar que vengan los IDs del estudiante y curso</li>
                    <li>Validar que el estudiante y curso existan en la BD</li>
                    <li>Cargar las entidades completas (no solo IDs)</li>
                    <li>Retornar c√≥digo 201 (CREATED) si es exitoso</li>
                </ol>
            </div>

            <h3>üîÑ PUT - Actualizaci√≥n Completa</h3>

            <div class="endpoint">
                <span class="endpoint-method put">PUT</span>
                <code>/api/inscripciones/{idEstudiante}/{idCurso}</code>
                <p><strong>Descripci√≥n:</strong> Actualiza todos los campos de una inscripci√≥n</p>
            </div>
            <div class="code-block">
                <pre><span class="annotation">@PutMapping</span>(<span class="string">"/{idEstudiante}/{idCurso}"</span>)
<span class="keyword">public</span> <span class="type">ResponseEntity</span>&lt;?&gt; <span class="function">updateInscripcion</span>(
        <span class="annotation">@PathVariable</span> <span class="type">Long</span> idEstudiante,
        <span class="annotation">@PathVariable</span> <span class="type">Long</span> idCurso,
        <span class="annotation">@Valid</span> <span class="annotation">@RequestBody</span> <span class="type">Inscripcion</span> inscripcionDetails) {
    
    <span class="type">InscripcionId</span> id = <span class="keyword">new</span> <span class="type">InscripcionId</span>(idEstudiante, idCurso);
    
    <span class="keyword">return</span> inscripcionRepository.<span class="function">findById</span>(id)
            .<span class="function">map</span>(inscripcion -> {
                inscripcion.<span class="function">setFechaInscripcion</span>(inscripcionDetails.<span class="function">getFechaInscripcion</span>());
                inscripcion.<span class="function">setEstado</span>(inscripcionDetails.<span class="function">getEstado</span>());
                <span class="type">Inscripcion</span> updatedInscripcion = inscripcionRepository.<span class="function">save</span>(inscripcion);
                <span class="keyword">return</span> <span class="type">ResponseEntity</span>.<span class="function">ok</span>(updatedInscripcion);
            })
            .<span class="function">orElse</span>(<span class="type">ResponseEntity</span>.<span class="function">notFound</span>().<span class="function">build</span>());
}</pre>
            </div>

            <h3>üîß PATCH - Actualizaci√≥n Parcial</h3>

            <div class="endpoint">
                <span class="endpoint-method patch">PATCH</span>
                <code>/api/inscripciones/{idEstudiante}/{idCurso}</code>
                <p><strong>Descripci√≥n:</strong> Actualiza solo los campos enviados</p>
            </div>
            <div class="code-block">
                <pre><span class="annotation">@PatchMapping</span>(<span class="string">"/{idEstudiante}/{idCurso}"</span>)
<span class="keyword">public</span> <span class="type">ResponseEntity</span>&lt;?&gt; <span class="function">partialUpdateInscripcion</span>(
        <span class="annotation">@PathVariable</span> <span class="type">Long</span> idEstudiante,
        <span class="annotation">@PathVariable</span> <span class="type">Long</span> idCurso,
        <span class="annotation">@RequestBody</span> <span class="type">Inscripcion</span> inscripcionDetails) {
    
    <span class="type">InscripcionId</span> id = <span class="keyword">new</span> <span class="type">InscripcionId</span>(idEstudiante, idCurso);
    
    <span class="keyword">return</span> inscripcionRepository.<span class="function">findById</span>(id)
            .<span class="function">map</span>(inscripcion -> {
                <span class="keyword">if</span> (inscripcionDetails.<span class="function">getFechaInscripcion</span>() != <span class="keyword">null</span>) {
                    inscripcion.<span class="function">setFechaInscripcion</span>(inscripcionDetails.<span class="function">getFechaInscripcion</span>());
                }
                <span class="keyword">if</span> (inscripcionDetails.<span class="function">getEstado</span>() != <span class="keyword">null</span>) {
                    inscripcion.<span class="function">setEstado</span>(inscripcionDetails.<span class="function">getEstado</span>());
                }
                <span class="type">Inscripcion</span> updatedInscripcion = inscripcionRepository.<span class="function">save</span>(inscripcion);
                <span class="keyword">return</span> <span class="type">ResponseEntity</span>.<span class="function">ok</span>(updatedInscripcion);
            })
            .<span class="function">orElse</span>(<span class="type">ResponseEntity</span>.<span class="function">notFound</span>().<span class="function">build</span>());
}</pre>
            </div>

            <div class="info-box">
                <h4>üîç Diferencia entre PUT y PATCH:</h4>
                <ul>
                    <li><strong>PUT:</strong> Actualizaci√≥n completa - debe enviar todos los campos</li>
                    <li><strong>PATCH:</strong> Actualizaci√≥n parcial - env√≠a solo los campos que quieres cambiar</li>
                    <li><strong>PATCH sin @Valid:</strong> Permite que algunos campos vengan como null</li>
                </ul>
            </div>

            <h3>üóëÔ∏è DELETE - Eliminar Inscripci√≥n</h3>

            <div class="endpoint">
                <span class="endpoint-method delete">DELETE</span>
                <code>/api/inscripciones/{idEstudiante}/{idCurso}</code>
                <p><strong>Descripci√≥n:</strong> Elimina una inscripci√≥n</p>
            </div>
            <div class="code-block">
                <pre><span class="annotation">@DeleteMapping</span>(<span class="string">"/{idEstudiante}/{idCurso}"</span>)
<span class="keyword">public</span> <span class="type">ResponseEntity</span>&lt;<span class="type">Void</span>&gt; <span class="function">deleteInscripcion</span>(
        <span class="annotation">@PathVariable</span> <span class="type">Long</span> idEstudiante,
        <span class="annotation">@PathVariable</span> <span class="type">Long</span> idCurso) {
    
    <span class="type">InscripcionId</span> id = <span class="keyword">new</span> <span class="type">InscripcionId</span>(idEstudiante, idCurso);
    
    <span class="keyword">return</span> inscripcionRepository.<span class="function">findById</span>(id)
            .<span class="function">map</span>(inscripcion -> {
                inscripcionRepository.<span class="function">delete</span>(inscripcion);
                <span class="keyword">return</span> <span class="type">ResponseEntity</span>.<span class="function">noContent</span>().&lt;<span class="type">Void</span>&gt;<span class="function">build</span>();
            })
            .<span class="function">orElse</span>(<span class="type">ResponseEntity</span>.<span class="function">notFound</span>().<span class="function">build</span>());
}</pre>
            </div>

            <h3>üìä C√≥digos HTTP Utilizados</h3>
            <table>
                <tr>
                    <th>C√≥digo</th>
                    <th>M√©todo</th>
                    <th>Significado</th>
                </tr>
                <tr>
                    <td><strong>200</strong></td>
                    <td>GET, PUT, PATCH</td>
                    <td>OK - Operaci√≥n exitosa con contenido</td>
                </tr>
                <tr>
                    <td><strong>201</strong></td>
                    <td>POST</td>
                    <td>Created - Recurso creado exitosamente</td>
                </tr>
                <tr>
                    <td><strong>204</strong></td>
                    <td>DELETE</td>
                    <td>No Content - Eliminado exitosamente</td>
                </tr>
                <tr>
                    <td><strong>400</strong></td>
                    <td>POST</td>
                    <td>Bad Request - Error de validaci√≥n</td>
                </tr>
                <tr>
                    <td><strong>404</strong></td>
                    <td>GET, PUT, PATCH, DELETE</td>
                    <td>Not Found - Recurso no existe</td>
                </tr>
            </table>

            <!-- Ejemplos -->
            <h2 id="ejemplos">9. Ejemplos de Uso</h2>

            <h3>üîÑ Orden correcto para crear datos en Postman</h3>
            
            <div class="warning-box">
                <h4>‚ö†Ô∏è Orden de creaci√≥n obligatorio:</h4>
                <ol>
                    <li><strong>1Ô∏è‚É£ Primero:</strong> Estudiantes y Cursos (en cualquier orden o paralelo)</li>
                    <li><strong>2Ô∏è‚É£ √öltimo:</strong> Inscripciones (requieren que existan estudiantes y cursos)</li>
                </ol>
                <p><strong>¬øPor qu√©?</strong> Las inscripciones necesitan referencias a estudiantes y cursos existentes. El controller valida su existencia antes de crear la inscripci√≥n.</p>
            </div>

            <h3>üìù Flujo completo de requests listo para usar</h3>

            <h4>Paso 1: Crear Estudiantes</h4>
            <div class="endpoint">
                <span class="endpoint-method post">POST</span>
                <code>http://localhost:8080/api/estudiantes</code>
            </div>
            <div class="json-example">
{
    "apellido": "Garc√≠a"
}
            </div>
            <div class="success-box">
                <p><strong>‚úÖ Respuesta esperada (201 Created):</strong></p>
                <div class="json-example" style="margin-top: 10px;">
{
    "idEstudiante": 1,
    "apellido": "Garc√≠a",
    "inscripciones": []
}
                </div>
            </div>

            <p><strong>Crear m√°s estudiantes:</strong></p>
            <div class="endpoint">
                <span class="endpoint-method post">POST</span>
                <code>http://localhost:8080/api/estudiantes</code>
            </div>
            <div class="json-example">
{
    "apellido": "P√©rez"
}
            </div>
            <div class="json-example">
{
    "apellido": "Rodr√≠guez"
}
            </div>

            <h4>Paso 2: Crear Cursos</h4>
            <div class="endpoint">
                <span class="endpoint-method post">POST</span>
                <code>http://localhost:8080/api/cursos</code>
            </div>
            <div class="json-example">
{
    "nombre": "Matem√°ticas"
}
            </div>
            <div class="success-box">
                <p><strong>‚úÖ Respuesta esperada (201 Created):</strong></p>
                <div class="json-example" style="margin-top: 10px;">
{
    "idCurso": 1,
    "nombre": "Matem√°ticas",
    "inscripciones": []
}
                </div>
            </div>

            <p><strong>Crear m√°s cursos:</strong></p>
            <div class="endpoint">
                <span class="endpoint-method post">POST</span>
                <code>http://localhost:8080/api/cursos</code>
            </div>
            <div class="json-example">
{
    "nombre": "F√≠sica"
}
            </div>
            <div class="json-example">
{
    "nombre": "Qu√≠mica"
}
            </div>
            <div class="json-example">
{
    "nombre": "Desarrollo Web"
}
            </div>

            <h4>Paso 3: Crear Inscripciones</h4>
            <div class="info-box">
                <p><strong>üí° Importante:</strong> Usa los IDs de los estudiantes y cursos que acabas de crear. Los ejemplos usan ID 1 para ambos, pero ajusta seg√∫n tus respuestas anteriores.</p>
            </div>

            <div class="endpoint">
                <span class="endpoint-method post">POST</span>
                <code>http://localhost:8080/api/inscripciones</code>
            </div>
            <div class="json-example">
{
    "id": {
        "idEstudiante": 1,
        "idCurso": 1
    },
    "fechaInscripcion": "2025-11-19",
    "estado": "ACTIVA"
}
            </div>
            <div class="success-box">
                <p><strong>‚úÖ Respuesta esperada (201 Created):</strong></p>
                <div class="json-example" style="margin-top: 10px;">
{
    "id": {
        "idEstudiante": 1,
        "idCurso": 1
    },
    "estudiante": {
        "idEstudiante": 1,
        "apellido": "Garc√≠a"
    },
    "curso": {
        "idCurso": 1,
        "nombre": "Matem√°ticas"
    },
    "fechaInscripcion": "2025-11-19",
    "estado": "ACTIVA"
}
                </div>
            </div>

            <p><strong>Crear m√°s inscripciones (Garc√≠a inscrito en varios cursos):</strong></p>
            <div class="endpoint">
                <span class="endpoint-method post">POST</span>
                <code>http://localhost:8080/api/inscripciones</code>
            </div>
            <div class="json-example">
{
    "id": {
        "idEstudiante": 1,
        "idCurso": 2
    },
    "fechaInscripcion": "2025-11-19",
    "estado": "ACTIVA"
}
            </div>
            <div class="json-example">
{
    "id": {
        "idEstudiante": 1,
        "idCurso": 4
    },
    "fechaInscripcion": "2025-11-20",
    "estado": "EN_PROGRESO"
}
            </div>

            <p><strong>Varios estudiantes en el mismo curso:</strong></p>
            <div class="endpoint">
                <span class="endpoint-method post">POST</span>
                <code>http://localhost:8080/api/inscripciones</code>
            </div>
            <div class="json-example">
{
    "id": {
        "idEstudiante": 2,
        "idCurso": 1
    },
    "fechaInscripcion": "2025-11-19",
    "estado": "ACTIVA"
}
            </div>
            <div class="json-example">
{
    "id": {
        "idEstudiante": 3,
        "idCurso": 1
    },
    "fechaInscripcion": "2025-11-18",
    "estado": "ACTIVA"
}
            </div>

            <h4>‚ùå Error si intentas crear sin datos previos</h4>
            <p>Si intentas crear una inscripci√≥n sin tener el estudiante o curso creados:</p>
            <div class="endpoint">
                <span class="endpoint-method post">POST</span>
                <code>http://localhost:8080/api/inscripciones</code>
            </div>
            <div class="json-example">
{
    "id": {
        "idEstudiante": 999,
        "idCurso": 1
    },
    "fechaInscripcion": "2025-11-19",
    "estado": "ACTIVA"
}
            </div>
            <div class="warning-box">
                <p><strong>‚ùå Respuesta (400 Bad Request):</strong></p>
                <div class="json-example" style="margin-top: 10px;">
"Estudiante no encontrado"
                </div>
            </div>

            <h3>üîç Consultas √∫tiles despu√©s de crear datos</h3>

            <h4>Ver todos los cursos de un estudiante:</h4>
            <div class="endpoint">
                <span class="endpoint-method get">GET</span>
                <code>http://localhost:8080/api/inscripciones/estudiante/1</code>
            </div>
            <p>Retorna todas las inscripciones del estudiante Garc√≠a (ID 1)</p>

            <h4>Ver todos los estudiantes de un curso:</h4>
            <div class="endpoint">
                <span class="endpoint-method get">GET</span>
                <code>http://localhost:8080/api/inscripciones/curso/1</code>
            </div>
            <p>Retorna todas las inscripciones del curso Matem√°ticas (ID 1)</p>

            <h4>Ver una inscripci√≥n espec√≠fica:</h4>
            <div class="endpoint">
                <span class="endpoint-method get">GET</span>
                <code>http://localhost:8080/api/inscripciones/1/1</code>
            </div>
            <p>Retorna la inscripci√≥n de Garc√≠a en Matem√°ticas</p>

            <h3>üîÑ Actualizar datos</h3>

            <h4>Cambiar solo el estado (PATCH):</h4>
            <div class="endpoint">
                <span class="endpoint-method patch">PATCH</span>
                <code>http://localhost:8080/api/inscripciones/1/1</code>
            </div>
            <div class="json-example">
{
    "estado": "COMPLETADA"
}
            </div>

            <h4>Actualizar todo (PUT):</h4>
            <div class="endpoint">
                <span class="endpoint-method put">PUT</span>
                <code>http://localhost:8080/api/inscripciones/1/1</code>
            </div>
            <div class="json-example">
{
    "fechaInscripcion": "2025-11-20",
    "estado": "EN_PROGRESO"
}
            </div>

            <h3>üìä Resumen del flujo completo</h3>
            <table>
                <tr>
                    <th>Orden</th>
                    <th>Acci√≥n</th>
                    <th>Endpoint</th>
                    <th>Resultado</th>
                </tr>
                <tr>
                    <td>1</td>
                    <td>POST Estudiante</td>
                    <td><code>/api/estudiantes</code></td>
                    <td>Garc√≠a ‚Üí ID: 1</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>POST Estudiante</td>
                    <td><code>/api/estudiantes</code></td>
                    <td>P√©rez ‚Üí ID: 2</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>POST Curso</td>
                    <td><code>/api/cursos</code></td>
                    <td>Matem√°ticas ‚Üí ID: 1</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>POST Curso</td>
                    <td><code>/api/cursos</code></td>
                    <td>F√≠sica ‚Üí ID: 2</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>POST Inscripci√≥n</td>
                    <td><code>/api/inscripciones</code></td>
                    <td>Garc√≠a (1) + Matem√°ticas (1)</td>
                </tr>
                <tr>
                    <td>6</td>
                    <td>POST Inscripci√≥n</td>
                    <td><code>/api/inscripciones</code></td>
                    <td>Garc√≠a (1) + F√≠sica (2)</td>
                </tr>
                <tr>
                    <td>7</td>
                    <td>POST Inscripci√≥n</td>
                    <td><code>/api/inscripciones</code></td>
                    <td>P√©rez (2) + Matem√°ticas (1)</td>
                </tr>
                <tr>
                    <td>8</td>
                    <td>GET Inscripciones</td>
                    <td><code>/api/inscripciones/estudiante/1</code></td>
                    <td>Ver cursos de Garc√≠a</td>
                </tr>
                <tr>
                    <td>9</td>
                    <td>PATCH Inscripci√≥n</td>
                    <td><code>/api/inscripciones/1/1</code></td>
                    <td>Cambiar estado a COMPLETADA</td>
                </tr>
            </table>

            <div class="success-box">
                <p><strong>‚úÖ Consejo:</strong> Guarda los IDs que recibes en cada respuesta para usarlos en las siguientes peticiones. Los ejemplos usan IDs secuenciales (1, 2, 3...) asumiendo que empiezas con una base de datos vac√≠a.</p>
            </div>

            <h3>üí° Otros ejemplos de uso</h3>

            <h4>üìù Ejemplo: Crear inscripci√≥n con fecha actual</h4>
            <div class="endpoint">
                <span class="endpoint-method post">POST</span>
                <code>/api/inscripciones</code>
            </div>
            <div class="json-example">
{
  "id": {
    "idEstudiante": 5,
    "idCurso": 3
  },
  "fechaInscripcion": "2025-11-19",
  "estado": "ACTIVA"
}
            </div>
            <div class="success-box">
                <p><strong>‚úÖ Respuesta:</strong> C√≥digo 201 (Created) con la inscripci√≥n creada, incluyendo los objetos completos de <code>estudiante</code> y <code>curso</code>.</p>
            </div>

            <h4>üìù Ejemplo: Crear inscripci√≥n con todos los estados</h4>
            <div class="endpoint">
                <span class="endpoint-method post">POST</span>
                <code>/api/inscripciones</code>
            </div>
            <p><strong>Estado ACTIVA:</strong></p>
            <div class="json-example">
{
  "id": {
    "idEstudiante": 5,
    "idCurso": 3
  },
  "fechaInscripcion": "2025-11-19",
  "estado": "ACTIVA"
}
            </div>
            <p><strong>Estado EN_PROGRESO:</strong></p>
            <div class="json-example">
{
  "id": {
    "idEstudiante": 5,
    "idCurso": 4
  },
  "fechaInscripcion": "2025-10-15",
  "estado": "EN_PROGRESO"
}
            </div>
            <p><strong>Estado COMPLETADA:</strong></p>
            <div class="json-example">
{
  "id": {
    "idEstudiante": 5,
    "idCurso": 2
  },
  "fechaInscripcion": "2025-08-01",
  "estado": "COMPLETADA"
}
            </div>
            <p><strong>Estado ABANDONADA:</strong></p>
            <div class="json-example">
{
  "id": {
    "idEstudiante": 5,
    "idCurso": 1
  },
  "fechaInscripcion": "2025-09-10",
  "estado": "ABANDONADA"
}
            </div>

            <h4>üîç Ejemplo: Consultar inscripci√≥n espec√≠fica</h4>
            <div class="endpoint">
                <span class="endpoint-method get">GET</span>
                <code>/api/inscripciones/5/3</code>
            </div>
            <div class="json-example">
{
  "id": {
    "idEstudiante": 5,
    "idCurso": 3
  },
  "estudiante": {
    "id": 5,
    "nombre": "Juan P√©rez",
    "email": "juan@example.com"
  },
  "curso": {
    "id": 3,
    "nombre": "Desarrollo Web",
    "creditos": 4
  },
  "fechaInscripcion": "2025-11-19",
  "estado": "ACTIVA"
}
            </div>

            <h4>üìö Ejemplo: Obtener cursos de un estudiante</h4>
            <div class="endpoint">
                <span class="endpoint-method get">GET</span>
                <code>/api/inscripciones/estudiante/5</code>
            </div>
            <p>Retorna un array con todas las inscripciones del estudiante 5.</p>

            <h4>üîÑ Ejemplo: Actualizaci√≥n parcial (solo estado)</h4>
            <div class="endpoint">
                <span class="endpoint-method patch">PATCH</span>
                <code>/api/inscripciones/5/3</code>
            </div>
            <div class="json-example">
{
  "estado": "COMPLETADA"
}
            </div>
            <p>Solo cambia el estado, mantiene la fecha sin modificar.</p>

            <h4>üîÑ Ejemplo: Actualizaci√≥n completa</h4>
            <div class="endpoint">
                <span class="endpoint-method put">PUT</span>
                <code>/api/inscripciones/5/3</code>
            </div>
            <div class="json-example">
{
  "fechaInscripcion": "2025-11-20",
  "estado": "EN_PROGRESO"
}
            </div>
            <p>Debe enviar todos los campos modificables.</p>

            <h4>üóëÔ∏è Ejemplo: Eliminar inscripci√≥n</h4>
            <div class="endpoint">
                <span class="endpoint-method delete">DELETE</span>
                <code>/api/inscripciones/5/3</code>
            </div>
            <div class="success-box">
                <p><strong>‚úÖ Respuesta:</strong> C√≥digo 204 (No Content) - La inscripci√≥n fue eliminada exitosamente.</p>
            </div>

            <h4>üí° Ejemplo: C√≥digo Java completo</h4>
            <div class="code-block">
                <pre><span class="comment">// Crear inscripci√≥n desde el controller</span>
<span class="annotation">@PostMapping</span>
<span class="keyword">public</span> <span class="type">Inscripcion</span> <span class="function">crearInscripcion</span>(
    <span class="annotation">@RequestParam</span> <span class="type">Long</span> idEstudiante,
    <span class="annotation">@RequestParam</span> <span class="type">Long</span> idCurso) {
    
    <span class="comment">// Crear la clave compuesta</span>
    <span class="type">InscripcionId</span> id = <span class="keyword">new</span> <span class="type">InscripcionId</span>(idEstudiante, idCurso);
    
    <span class="comment">// Buscar estudiante y curso</span>
    <span class="type">Estudiante</span> estudiante = estudianteRepo.<span class="function">findById</span>(idEstudiante)
        .<span class="function">orElseThrow</span>(() -> <span class="keyword">new</span> <span class="type">RuntimeException</span>(<span class="string">"Estudiante no encontrado"</span>));
    <span class="type">Curso</span> curso = cursoRepo.<span class="function">findById</span>(idCurso)
        .<span class="function">orElseThrow</span>(() -> <span class="keyword">new</span> <span class="type">RuntimeException</span>(<span class="string">"Curso no encontrado"</span>));
    
    <span class="comment">// Crear inscripci√≥n</span>
    <span class="type">Inscripcion</span> inscripcion = <span class="keyword">new</span> <span class="type">Inscripcion</span>();
    inscripcion.<span class="function">setId</span>(id);
    inscripcion.<span class="function">setEstudiante</span>(estudiante);
    inscripcion.<span class="function">setCurso</span>(curso);
    inscripcion.<span class="function">setFechaInscripcion</span>(<span class="type">LocalDate</span>.<span class="function">now</span>());  <span class="comment">‚Üê LocalDate</span>
    inscripcion.<span class="function">setEstado</span>(<span class="type">EstadoInscripcion</span>.ACTIVA);   <span class="comment">‚Üê Enum</span>
    
    <span class="keyword">return</span> inscripcionRepo.<span class="function">save</span>(inscripcion);
}</pre>
            </div>

            <div class="success-box">
                <h4>‚ú® Caracter√≠sticas Destacadas del Sistema TOA:</h4>
                <ul>
                    <li>‚úÖ Clave compuesta para identificaci√≥n √∫nica de inscripciones</li>
                    <li>‚úÖ Validaciones completas en el controller</li>
                    <li>‚úÖ Manejo autom√°tico de conversi√≥n JSON ‚Üî Java</li>
                    <li>‚úÖ C√≥digos HTTP apropiados para cada operaci√≥n</li>
                    <li>‚úÖ Soporte para actualizaci√≥n completa (PUT) y parcial (PATCH)</li>
                    <li>‚úÖ Estados de inscripci√≥n mediante Enum type-safe</li>
                    <li>‚úÖ Fechas con LocalDate (sin zona horaria)</li>
                    <li>‚úÖ Carga EAGER de relaciones para respuestas completas</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>